<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neshama — Toronto & Montreal Jewish Obituaries</title>
    <meta name="description" content="Neshama brings together obituaries and memorials from Toronto and Montreal's Jewish funeral homes. Search, remember, and honor every soul.">
    <meta name="theme-color" content="#2C2017">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <meta property="og:title" content="Neshama — Every Soul Remembered">
    <meta property="og:description" content="Obituaries and memorials from Toronto and Montreal's Jewish funeral homes, in one place.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://neshama.ca">
    <meta property="og:site_name" content="Neshama">
    <meta property="og:image" content="https://neshama.ca/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400;1,500&family=Source+Serif+4:ital,opsz,wght@0,8..60,300;0,8..60,400;0,8..60,500;0,8..60,600;1,8..60,400&display=swap" rel="stylesheet">
    <style>
        :root {
            --terracotta: #C75B12;
            --cream: #FBF6F0;
            --sage: #6B7F5E;
            --dark: #2C2017;
            --warm-gray: #8B7E74;
            --gold: #C9A96E;
            --light-border: rgba(139,126,116,0.15);
            --font-heading: 'Cormorant Garamond', Georgia, serif;
            --font-body: 'Source Serif 4', Georgia, serif;
            --ease-out: cubic-bezier(0.16, 1, 0.3, 1);
        }

        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; -webkit-font-smoothing: antialiased; }
        body { font-family: var(--font-body); font-size: 17px; line-height: 1.7; color: var(--dark); background: var(--cream); overflow-x: hidden; }
        ::selection { background: rgba(199,91,18,0.12); color: var(--dark); }
        a { color: var(--terracotta); text-decoration: none; transition: color 0.25s ease; }
        a:hover { color: #a04a0e; }
        a:focus-visible { outline: 2px solid var(--terracotta); outline-offset: 3px; border-radius: 2px; }

        /* Scroll Animations */
        .reveal { opacity: 0; transform: translateY(20px); transition: opacity 0.6s var(--ease-out), transform 0.6s var(--ease-out); }
        .reveal.visible { opacity: 1; transform: translateY(0); }
        .reveal-d1 { transition-delay: 0.08s; }
        .reveal-d2 { transition-delay: 0.16s; }
        .reveal-d3 { transition-delay: 0.24s; }

        /* Nav */
        .nav { position: fixed; top: 0; left: 0; right: 0; z-index: 200; display: flex; align-items: center; justify-content: space-between; padding: 1rem 2rem; background: transparent; transition: background 0.35s ease, box-shadow 0.35s ease; }
        .nav.scrolled { background: rgba(251,246,240,0.92); backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px); box-shadow: 0 1px 0 var(--light-border); }
        .nav-brand { font-family: var(--font-heading); font-size: 1.05rem; font-weight: 400; letter-spacing: 0.1em; text-transform: uppercase; color: var(--dark); text-decoration: none; opacity: 0; transition: opacity 0.35s ease; }
        .nav.scrolled .nav-brand { opacity: 0.7; }
        .nav-brand:hover { color: var(--dark); opacity: 1; }
        .nav-links { display: flex; gap: 1.75rem; align-items: center; }
        .nav-links a { font-family: var(--font-body); font-size: 0.92rem; color: var(--dark); text-decoration: none; opacity: 0.55; transition: opacity 0.2s ease; }
        .nav-links a:hover { opacity: 1; color: var(--dark); }
        .nav-cta { font-family: var(--font-body); font-size: 0.88rem; font-weight: 600; color: white !important; background: var(--terracotta); padding: 0.5rem 1.25rem; border-radius: 8px; text-decoration: none; opacity: 1 !important; transition: background 0.25s ease, transform 0.25s ease; }
        .nav-cta:hover { background: #a04a0e; transform: translateY(-1px); color: white !important; }

        /* Hero */
        .hero { min-height: 100vh; min-height: 100svh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 96px 24px 80px; position: relative; }
        .hero::after { content: ''; position: absolute; top: 38%; left: 50%; transform: translate(-50%, -50%); width: 560px; height: 560px; background: radial-gradient(ellipse at center, rgba(201,169,110,0.07) 0%, rgba(199,91,18,0.03) 40%, transparent 70%); pointer-events: none; z-index: 0; }
        .hero-content { position: relative; z-index: 1; max-width: 620px; }
        .hero-title { font-family: var(--font-heading); font-size: clamp(2.8rem, 7vw, 4.2rem); font-weight: 300; letter-spacing: 0.14em; text-transform: uppercase; line-height: 1.1; color: var(--dark); }
        .hero-hebrew { display: block; font-family: var(--font-heading); font-size: 1rem; font-weight: 400; letter-spacing: 0.22em; color: var(--warm-gray); margin-top: 6px; direction: rtl; }
        .hero-tagline { font-family: var(--font-heading); font-size: clamp(1.05rem, 2vw, 1.22rem); font-weight: 400; font-style: italic; color: var(--terracotta); margin-top: 28px; }
        .hero-rule { width: 40px; height: 1px; border: none; background: var(--gold); opacity: 0.5; margin: 24px auto 28px; }
        .hero-desc { font-size: clamp(1rem, 1.8vw, 1.12rem); color: rgba(44,32,23,0.65); line-height: 1.75; max-width: 460px; margin: 0 auto 40px; }
        .hero-buttons { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }

        /* Buttons */
        .btn { display: inline-flex; align-items: center; gap: 10px; font-family: var(--font-heading); font-size: 1.05rem; font-weight: 500; letter-spacing: 0.04em; padding: 14px 34px; border-radius: 8px; text-decoration: none; transition: background 0.25s ease, transform 0.25s var(--ease-out), box-shadow 0.25s ease; cursor: pointer; border: none; }
        .btn-primary { color: var(--cream); background: var(--terracotta); box-shadow: 0 2px 8px rgba(199,91,18,0.12); }
        .btn-primary:hover { background: #a04a0e; transform: translateY(-1px); box-shadow: 0 4px 20px rgba(199,91,18,0.18); color: var(--cream); }
        .btn-secondary { color: var(--dark); background: transparent; border: 1.5px solid var(--light-border); }
        .btn-secondary:hover { border-color: var(--terracotta); color: var(--terracotta); transform: translateY(-1px); }
        .btn-arrow { display: flex; transition: transform 0.3s var(--ease-out); }
        .btn:hover .btn-arrow { transform: translateX(3px); }

        /* Trust Bar */
        .trust { display: flex; align-items: center; justify-content: center; flex-wrap: wrap; padding: 36px 24px; background: var(--cream); border-top: 1px solid var(--light-border); }
        .trust-item { font-size: 0.86rem; color: var(--warm-gray); padding: 0 24px; display: flex; align-items: center; gap: 7px; }
        .trust-item:not(:last-child) { border-right: 1px solid var(--light-border); }
        .trust-num { font-weight: 600; color: var(--dark); }

        /* Section */
        .section { padding: 96px 24px; }
        .container { max-width: 960px; margin: 0 auto; }
        .section-header { text-align: center; margin-bottom: 56px; }
        .section-heading { font-family: var(--font-heading); font-size: clamp(1.5rem, 3.2vw, 2.1rem); font-weight: 400; color: var(--dark); line-height: 1.3; }
        .section-heading::after { content: ''; display: block; width: 36px; height: 1.5px; background: var(--gold); margin: 18px auto 0; }

        /* Recent Obituaries */
        .obits-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
        .obit-card { background: white; border-radius: 14px; overflow: hidden; transition: transform 0.25s ease, box-shadow 0.25s ease; text-decoration: none; color: var(--dark); }
        .obit-card:hover { transform: translateY(-4px); box-shadow: 0 4px 16px rgba(0,0,0,0.06); color: var(--dark); }
        .obit-image { width: 100%; height: 200px; object-fit: cover; display: block; background: linear-gradient(135deg, #f0ebe4, #e8e0d8); }
        .obit-placeholder { width: 100%; height: 200px; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #f0ebe4, #e8e0d8); font-size: 3rem; opacity: 0.4; }
        .obit-info { padding: 1.25rem; }
        .obit-name { font-family: var(--font-heading); font-size: 1.3rem; font-weight: 500; margin-bottom: 4px; }
        .obit-meta { font-size: 0.88rem; color: var(--warm-gray); }
        .obits-more { text-align: center; margin-top: 40px; }

        /* Shiva Section */
        .shiva-section { background: white; }
        .shiva-content { display: grid; grid-template-columns: 1fr 1fr; gap: 64px; align-items: center; }
        .shiva-text h2 { font-family: var(--font-heading); font-size: clamp(1.6rem, 3vw, 2.2rem); font-weight: 400; margin-bottom: 20px; }
        .shiva-text p { color: rgba(44,32,23,0.7); margin-bottom: 28px; line-height: 1.8; }
        .shiva-steps { list-style: none; counter-reset: step; }
        .shiva-steps li { counter-increment: step; display: flex; align-items: flex-start; gap: 16px; margin-bottom: 20px; font-size: 0.98rem; color: rgba(44,32,23,0.75); }
        .shiva-steps li::before { content: counter(step); display: flex; align-items: center; justify-content: center; min-width: 32px; height: 32px; border-radius: 50%; background: rgba(199,91,18,0.08); color: var(--terracotta); font-weight: 600; font-size: 0.88rem; flex-shrink: 0; }

        /* Features Grid */
        .features-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 48px; }
        .feature-item { border-top: 1.5px solid rgba(201,169,110,0.45); padding-top: 24px; }
        .feature-title { font-family: var(--font-heading); font-size: 1.25rem; font-weight: 500; color: var(--dark); margin-bottom: 8px; }
        .feature-text { font-size: 0.98rem; color: rgba(44,32,23,0.62); line-height: 1.7; }

        /* Meaning Section */
        .meaning-section { background: var(--dark); color: var(--cream); position: relative; overflow: hidden; }
        .meaning-section::before { content: '\05E0\05E9\05DE\05D4'; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-family: var(--font-heading); font-size: clamp(8rem, 20vw, 16rem); color: rgba(251,246,240,0.03); pointer-events: none; direction: rtl; }
        .meaning-content { text-align: center; max-width: 560px; margin: 0 auto; position: relative; z-index: 1; }
        .meaning-hebrew { font-family: var(--font-heading); font-size: 2.2rem; color: var(--gold); opacity: 0.4; margin-bottom: 20px; }
        .meaning-text { font-size: 1.08rem; color: rgba(251,246,240,0.7); line-height: 1.8; margin-bottom: 28px; }
        .meaning-link { font-family: var(--font-heading); font-size: 1rem; color: var(--gold); display: inline-flex; align-items: center; gap: 8px; border-bottom: 1px solid transparent; transition: border-color 0.3s ease; }
        .meaning-link:hover { border-bottom-color: var(--gold); color: var(--gold); }

        /* Footer */
        .footer { background: var(--dark); color: rgba(251,246,240,0.65); padding: 48px 24px 36px; }
        .footer-inner { max-width: 960px; margin: 0 auto; display: grid; grid-template-columns: 1fr 2fr; gap: 48px; align-items: start; }
        .footer-brand { font-family: var(--font-heading); font-size: 1.35rem; font-weight: 300; letter-spacing: 0.1em; color: var(--cream); text-transform: uppercase; margin-bottom: 12px; }
        .footer-tagline { font-size: 0.88rem; color: rgba(251,246,240,0.4); font-style: italic; }
        .footer-columns { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
        .footer-col h4 { font-family: var(--font-heading); font-size: 0.95rem; font-weight: 500; color: rgba(251,246,240,0.5); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 12px; }
        .footer-col a { display: block; font-size: 0.9rem; color: rgba(251,246,240,0.5); margin-bottom: 8px; transition: color 0.25s ease; text-decoration: none; }
        .footer-col a:hover { color: var(--gold); }
        .footer-bottom { max-width: 960px; margin: 0 auto; text-align: center; padding-top: 28px; border-top: 1px solid rgba(251,246,240,0.08); margin-top: 36px; }
        .footer-copy { font-size: 0.78rem; color: rgba(251,246,240,0.22); }

        /* Responsive */
        @media (max-width: 900px) {
            .obits-grid { grid-template-columns: 1fr; max-width: 400px; margin: 0 auto; }
            .shiva-content { grid-template-columns: 1fr; gap: 40px; }
            .features-grid { grid-template-columns: 1fr; max-width: 480px; margin: 0 auto; gap: 32px; }
            .footer-inner { grid-template-columns: 1fr; text-align: center; }
            .footer-columns { grid-template-columns: repeat(3, 1fr); }
        }

        @media (max-width: 640px) {
            .nav { padding: 0.9rem 1.25rem; }
            .nav-links { gap: 1.25rem; }
            .nav-links a { font-size: 0.88rem; }
            .hero { padding: 80px 20px 60px; }
            .hero-title { letter-spacing: 0.08em; }
            .section { padding: 72px 20px; }
            .trust { flex-direction: column; gap: 10px; padding: 28px 20px; }
            .trust-item:not(:last-child) { border-right: none; }
            .obit-image, .obit-placeholder { height: 160px; }
            .footer-columns { grid-template-columns: 1fr; text-align: center; }
            .hero-buttons { flex-direction: column; align-items: center; }
            .btn { width: 100%; max-width: 280px; justify-content: center; }
        }

        @media (max-width: 380px) {
            .nav-cta { padding: 0.4rem 1rem; font-size: 0.82rem; }
            .nav-brand { font-size: 0.95rem; }
            .nav-links { gap: 1rem; }
        }

        @media (prefers-reduced-motion: reduce) {
            .reveal { opacity: 1; transform: none; transition: none; }
            html { scroll-behavior: auto; }
        }

        .skip-link { position: absolute; top: -100%; left: 16px; background: var(--dark); color: var(--cream); padding: 12px 24px; border-radius: 4px; font-size: 0.9rem; z-index: 1000; transition: top 0.2s ease; }
        .skip-link:focus { top: 16px; }
    </style>
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Neshama — Every Soul Remembered">
    <meta name="twitter:description" content="Obituaries and memorials from Toronto and Montreal's Jewish funeral homes, in one place.">
    <meta name="twitter:image" content="https://neshama.ca/og-image.png">
    <script defer data-domain="neshama.ca" src="https://plausible.io/js/script.js"></script>
</head>
<body>
    <a href="#main" class="skip-link">Skip to main content</a>

    <nav class="nav" id="nav">
        <a href="/" class="nav-brand">Neshama</a>
        <div class="nav-links">
            <a href="/feed">Listings</a>
            <a href="/shiva-essentials">Essentials</a>
            <a href="/gifts">Gifts</a>
            <a href="/about">About</a>
            <a href="/shiva/organize" class="nav-cta">Organize Shiva</a>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero" role="banner">
        <div class="hero-content" id="main">
            <h1 class="hero-title reveal">Neshama</h1>
            <span class="hero-hebrew reveal reveal-d1" aria-label="Neshama in Hebrew">&#x05E0;&#x05E9;&#x05DE;&#x05D4;</span>
            <p class="hero-tagline reveal reveal-d1">Every soul remembered</p>
            <hr class="hero-rule reveal reveal-d2" aria-hidden="true">
            <p class="hero-desc reveal reveal-d2">
                Obituaries and memorials from Toronto and Montreal's Jewish funeral homes, in one place.
            </p>
            <div class="hero-buttons reveal reveal-d3">
                <a href="/feed" class="btn btn-primary">
                    View Obituaries
                    <span class="btn-arrow" aria-hidden="true"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg></span>
                </a>
                <a href="/shiva/organize" class="btn btn-secondary">Organize Shiva Meals</a>
            </div>
        </div>
    </section>

    <!-- Trust Bar -->
    <div class="trust reveal" id="trustBar" role="region" aria-label="Trust signals">
        <span class="trust-item"><span class="trust-num" id="trustObits">--</span> obituaries indexed</span>
        <span class="trust-item"><span class="trust-num">3</span> funeral homes</span>
        <span class="trust-item">Always free</span>
        <span class="trust-item">Updated daily</span>
    </div>

    <!-- Recent Obituaries -->
    <section class="section" aria-labelledby="recent-heading">
        <div class="container">
            <div class="section-header">
                <h2 class="section-heading reveal" id="recent-heading">Recent Obituaries</h2>
            </div>
            <div class="obits-grid reveal reveal-d1" id="obitsGrid">
                <!-- Loaded from API -->
            </div>
            <div class="obits-more reveal reveal-d2">
                <a href="/feed" class="btn btn-secondary">View All Obituaries</a>
            </div>
        </div>
    </section>

    <!-- Shiva Meal Coordination -->
    <section class="section shiva-section" aria-labelledby="shiva-heading">
        <div class="container">
            <div class="shiva-content">
                <div class="shiva-text reveal">
                    <h2 id="shiva-heading">Coordinate meals for families in mourning</h2>
                    <p>When someone passes, the community comes together. Neshama makes it easy to organize shiva meals so families can focus on grieving, not logistics.</p>
                    <ol class="shiva-steps">
                        <li>Create a shiva support page linked to the obituary</li>
                        <li>Set meal schedule, dietary needs, and address</li>
                        <li>Share with community — volunteers sign up for meals</li>
                        <li>Family receives meals without the coordination burden</li>
                    </ol>
                    <a href="/shiva/organize" class="btn btn-primary">Get Started</a>
                </div>
                <div class="reveal reveal-d2" style="text-align:center;">
                    <div style="background:var(--cream); border-radius:14px; padding:2.5rem; border:1px solid var(--light-border);">
                        <div style="font-size:3.5rem; margin-bottom:1rem; opacity:0.6;">&#x1F56F;&#xFE0F;</div>
                        <p style="font-family:var(--font-heading); font-size:1.3rem; color:var(--dark); margin-bottom:0.5rem;">Free for everyone</p>
                        <p style="font-size:0.95rem; color:var(--warm-gray);">No accounts, no fees, no ads. Just a community helping each other.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Three Things Done Well -->
    <section class="section" aria-labelledby="features-heading">
        <div class="container">
            <div class="section-header">
                <h2 class="section-heading reveal" id="features-heading">Three things, done well</h2>
            </div>
            <div class="features-grid">
                <div class="feature-item reveal reveal-d1">
                    <h3 class="feature-title">Search across funeral homes</h3>
                    <p class="feature-text">Find obituaries from Steeles, Benjamin's, and Paperman's — all in one search.</p>
                </div>
                <div class="feature-item reveal reveal-d2">
                    <h3 class="feature-title">Stay informed</h3>
                    <p class="feature-text">Receive email notifications when new obituaries are posted in your community.</p>
                </div>
                <div class="feature-item reveal reveal-d3">
                    <h3 class="feature-title">Support families</h3>
                    <p class="feature-text">Leave tributes, share memories, and help coordinate shiva meals for families in mourning.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Meaning of Neshama -->
    <section class="section meaning-section" aria-labelledby="meaning-heading">
        <div class="container">
            <div class="meaning-content">
                <div class="meaning-hebrew reveal" aria-hidden="true">&#x05E0;&#x05E9;&#x05DE;&#x05D4;</div>
                <h2 class="section-heading reveal reveal-d1" id="meaning-heading" style="color:var(--cream);">The Meaning of Neshama</h2>
                <p class="meaning-text reveal reveal-d2">
                    <strong style="color:var(--cream);">Neshama</strong> (&#x05E0;&#x05E9;&#x05DE;&#x05D4;) is the Hebrew word for "soul" — the divine spark within each person. This service was created to ensure that every soul in our community is remembered with the dignity they deserve.
                </p>
                <a href="/about" class="meaning-link reveal reveal-d3">
                    Learn more about our mission
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                </a>
            </div>
        </div>
    </section>

    <!-- Email Subscribe Section -->
    <section class="section" aria-labelledby="subscribe-heading" style="background: var(--dark); color: var(--cream);">
        <div class="container" style="max-width: 560px; text-align: center;">
            <h2 class="section-heading reveal" id="subscribe-heading" style="color: var(--cream);">Stay informed</h2>
            <p class="reveal reveal-d1" style="font-size: 1.05rem; color: rgba(251,246,240,0.7); margin-bottom: 2rem; line-height: 1.7;">
                Receive updates when new obituaries are posted from Toronto and Montreal funeral homes. Free — unsubscribe anytime.
            </p>
            <form id="subscribeForm" class="reveal reveal-d2" style="text-align: left;">
                <div id="subscribeError" style="display:none; background:rgba(239,83,80,0.15); border:1px solid rgba(239,83,80,0.4); color:#ffcdd2; padding:0.75rem 1rem; border-radius:8px; margin-bottom:1rem; font-size:0.95rem;"></div>
                <input type="email" id="subscribeEmail" placeholder="Your email address" required autocomplete="email"
                    style="width:100%; font-family:var(--font-body); font-size:1.05rem; padding:0.9rem 1.25rem; border:1.5px solid rgba(251,246,240,0.2); border-radius:8px; background:rgba(251,246,240,0.08); color:var(--cream); outline:none; margin-bottom:1.25rem; box-sizing:border-box;">

                <div style="margin-bottom:1.25rem;">
                    <p style="font-family:var(--font-heading); font-size:0.95rem; color:rgba(251,246,240,0.55); margin-bottom:0.6rem; letter-spacing:0.05em; text-transform:uppercase;">Frequency</p>
                    <label style="display:flex; align-items:center; gap:0.6rem; margin-bottom:0.5rem; cursor:pointer; font-size:1rem; color:var(--cream);">
                        <input type="radio" name="frequency" value="daily" checked style="accent-color:var(--terracotta); width:18px; height:18px;">
                        Daily — who passed today
                    </label>
                    <label style="display:flex; align-items:center; gap:0.6rem; cursor:pointer; font-size:1rem; color:var(--cream);">
                        <input type="radio" name="frequency" value="weekly" style="accent-color:var(--terracotta); width:18px; height:18px;">
                        Weekly — community roundup
                    </label>
                </div>

                <div style="margin-bottom:1.25rem;">
                    <p style="font-family:var(--font-heading); font-size:0.95rem; color:rgba(251,246,240,0.55); margin-bottom:0.6rem; letter-spacing:0.05em; text-transform:uppercase;">Location</p>
                    <label style="display:flex; align-items:center; gap:0.6rem; margin-bottom:0.5rem; cursor:pointer; font-size:1rem; color:var(--cream);">
                        <input type="checkbox" name="location" value="toronto" checked style="accent-color:var(--terracotta); width:18px; height:18px;">
                        Toronto (Steeles, Benjamin's)
                    </label>
                    <label style="display:flex; align-items:center; gap:0.6rem; cursor:pointer; font-size:1rem; color:var(--cream);">
                        <input type="checkbox" name="location" value="montreal" checked style="accent-color:var(--terracotta); width:18px; height:18px;">
                        Montreal (Paperman's)
                    </label>
                </div>

                <label style="display:flex; align-items:flex-start; gap:0.6rem; margin-bottom:1.25rem; cursor:pointer; font-size:0.9rem; color:rgba(251,246,240,0.55); line-height:1.5;">
                    <input type="checkbox" id="subscribeConsent" required style="accent-color:var(--terracotta); width:18px; height:18px; margin-top:2px; flex-shrink:0;">
                    I consent to receive email updates from Neshama (contact@neshama.ca). Unsubscribe anytime with one click.
                </label>

                <button type="submit" id="subscribeBtn"
                    style="width:100%; font-family:var(--font-heading); font-size:1.1rem; font-weight:500; padding:0.9rem; background:var(--terracotta); color:var(--cream); border:none; border-radius:8px; cursor:pointer; letter-spacing:0.03em; transition: background 0.25s ease, transform 0.25s ease;">
                    Get Updates
                </button>
            </form>

            <div id="subscribeSuccess" class="reveal" style="display:none; text-align:center; padding:2rem 0;">
                <div style="font-size:2.5rem; margin-bottom:1rem;">&#x2709;&#xFE0F;</div>
                <h3 style="font-family:var(--font-heading); font-size:1.5rem; color:var(--cream); margin-bottom:0.75rem;">Check your email</h3>
                <p style="color:rgba(251,246,240,0.7); font-size:1rem; line-height:1.6;">
                    We sent a confirmation to <strong id="subscribedEmail" style="color:var(--cream);"></strong><br>
                    Click the link to start receiving <span id="subscribedFreq" style="color:var(--cream);"></span> updates<span id="subscribedLoc"></span>.
                </p>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="footer-inner">
            <div>
                <div class="footer-brand">Neshama</div>
                <p class="footer-tagline">Built with care for the Jewish community</p>
            </div>
            <div class="footer-columns">
                <div class="footer-col">
                    <h4>Browse</h4>
                    <a href="/feed">Obituary Listings</a>
                    <a href="/shiva/guide">Shiva Guide</a>
                    <a href="/shiva-essentials">Shiva Essentials</a>
                    <a href="/what-to-bring-to-a-shiva">What to Bring</a>
                </div>
                <div class="footer-col">
                    <h4>Support</h4>
                    <a href="/shiva/organize">Organize Shiva Meals</a>
                    <a href="/gifts">Send a Gift</a>
                    <a href="/directory">Food Vendors</a>
                    <a href="/shiva/caterers">Caterers</a>
                </div>
                <div class="footer-col">
                    <h4>About</h4>
                    <a href="/about">About Neshama</a>
                    <a href="/faq">FAQ</a>
                    <a href="/privacy">Privacy Policy</a>
                    <a href="mailto:contact@neshama.ca">Contact</a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p class="footer-copy">&copy; 2026 Neshama</p>
        </div>
    </footer>

    <script>
    (function() {
        'use strict';

        // Scroll-triggered reveals
        var els = document.querySelectorAll('.reveal');
        if ('IntersectionObserver' in window) {
            var observer = new IntersectionObserver(function(entries) {
                entries.forEach(function(entry) {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.15, rootMargin: '0px 0px -40px 0px' });
            els.forEach(function(el) { observer.observe(el); });
        } else {
            els.forEach(function(el) { el.classList.add('visible'); });
        }

        // Hero reveals immediately
        setTimeout(function() {
            document.querySelectorAll('.hero .reveal').forEach(function(el) { el.classList.add('visible'); });
        }, 120);

        // Nav background on scroll
        var nav = document.getElementById('nav');
        if (nav) {
            window.addEventListener('scroll', function() {
                nav.classList.toggle('scrolled', window.scrollY > 60);
            }, { passive: true });
        }

        // Subscribe form handler
        var subscribeForm = document.getElementById('subscribeForm');
        if (subscribeForm) {
            subscribeForm.addEventListener('submit', function(e) {
                e.preventDefault();
                var emailInput = document.getElementById('subscribeEmail');
                var btn = document.getElementById('subscribeBtn');
                var errEl = document.getElementById('subscribeError');
                var email = emailInput.value.trim();

                if (!email) return;

                // Check consent
                var consent = document.getElementById('subscribeConsent');
                if (!consent.checked) {
                    errEl.textContent = 'Please check the consent box to continue.';
                    errEl.style.display = 'block';
                    return;
                }

                // Gather frequency
                var freqRadios = document.querySelectorAll('input[name="frequency"]');
                var frequency = 'daily';
                freqRadios.forEach(function(r) { if (r.checked) frequency = r.value; });

                // Gather locations
                var locCheckboxes = document.querySelectorAll('input[name="location"]');
                var locations = [];
                locCheckboxes.forEach(function(cb) { if (cb.checked) locations.push(cb.value); });
                if (locations.length === 0) {
                    errEl.textContent = 'Please select at least one location.';
                    errEl.style.display = 'block';
                    return;
                }

                // Disable and show loading
                btn.disabled = true;
                btn.textContent = 'Subscribing...';
                errEl.style.display = 'none';

                fetch('/api/subscribe', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        email: email,
                        frequency: frequency,
                        locations: locations.join(','),
                        consent: true
                    })
                })
                .then(function(r) { return r.json(); })
                .then(function(data) {
                    if (data.status === 'success') {
                        subscribeForm.style.display = 'none';
                        var successEl = document.getElementById('subscribeSuccess');
                        successEl.style.display = 'block';
                        successEl.classList.add('visible');
                        document.getElementById('subscribedEmail').textContent = email;
                        document.getElementById('subscribedFreq').textContent = frequency;
                        var locSpan = document.getElementById('subscribedLoc');
                        if (locations.length === 1) {
                            locSpan.textContent = ' for ' + locations[0].charAt(0).toUpperCase() + locations[0].slice(1);
                        } else {
                            locSpan.textContent = ' for Toronto and Montreal';
                        }
                        localStorage.setItem('neshama_subscribed', 'true');
                    } else {
                        errEl.textContent = data.message || 'Something went wrong. Please try again.';
                        errEl.style.display = 'block';
                        btn.disabled = false;
                        btn.textContent = 'Get Updates';
                    }
                })
                .catch(function() {
                    errEl.textContent = 'Unable to connect. Please try again.';
                    errEl.style.display = 'block';
                    btn.disabled = false;
                    btn.textContent = 'Get Updates';
                });
            });
        }

        // Load recent obituaries
        fetch('/api/obituaries')
            .then(function(r) { return r.json(); })
            .then(function(data) {
                if (data.status === 'success' && data.data) {
                    var obits = data.data.slice(0, 3);
                    var total = data.data.length;
                    var trustEl = document.getElementById('trustObits');
                    if (trustEl) trustEl.textContent = total;

                    var grid = document.getElementById('obitsGrid');
                    if (!grid || obits.length === 0) return;

                    var html = '';
                    obits.forEach(function(o) {
                        var slug = o.id || '';
                        html += '<a href="/memorial/' + encodeURIComponent(slug) + '" class="obit-card">';
                        if (o.photo_url) {
                            html += '<img class="obit-image" src="' + o.photo_url.replace(/"/g, '&quot;') + '" alt="" loading="lazy" onerror="this.outerHTML=\'<div class=obit-placeholder>&#x1F56F;&#xFE0F;</div>\'">';
                        } else {
                            html += '<div class="obit-placeholder">&#x1F56F;&#xFE0F;</div>';
                        }
                        html += '<div class="obit-info">';
                        html += '<div class="obit-name">' + (o.deceased_name || '').replace(/</g, '&lt;') + '</div>';
                        var meta = [];
                        if (o.source) meta.push(o.source);
                        if (o.date_of_death) {
                            try { meta.push(new Date(o.date_of_death).toLocaleDateString('en-US', {month: 'short', day: 'numeric'})); } catch(e) {}
                        }
                        html += '<div class="obit-meta">' + meta.join(' · ') + '</div>';
                        html += '</div></a>';
                    });
                    grid.innerHTML = html;
                }
            })
            .catch(function() {});
    })();
    </script>
    <script>if('serviceWorker' in navigator){navigator.serviceWorker.register('/sw.js');}</script>
</body>
</html>
